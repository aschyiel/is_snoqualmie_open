//..view.js, uly, dec2013..

/*jshint laxcomma:true, undef:true */
/*global exports, require, __dirname */

/**
* The view-template module for our http 200 response.
*/

var fs   = require( 'fs' )
  , path = require( 'path' )
  ;

var file_name = path.join( __dirname, '../assets/view.html' )

    /** @private The cached file. */
  , _data
  ;

/**
* Asynchronously pass-forward the view-template text to the callback.
*/
exports.get_template_text = function( callback ) {
  if ( _data ) {
    callback( _data );
    return;
  }

  fs.readFile( file_name, function( err, data ) {
    if ( err ) {
      throw err;
    }
    _data = data;
    callback( _data );
  });
};